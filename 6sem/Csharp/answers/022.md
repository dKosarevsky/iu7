[–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –≤–æ–ø—Ä–æ—Å–æ–≤](../questions.md)

<div id="begin"></div>
-----------------

# –í–æ–ø—Ä–æ—Å ‚Ññ 22

## –ú–µ—Ç–æ–¥—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (extension methods).

* [–°–∏–Ω—Ç–∞–∫—Å–∏—Å.](#syntax)
* [LINQ.](#linq)

#### –ú–µ—Ç–æ–¥—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –∏–ª–∏ –º–µ—Ç–æ–¥—ã, —è–≤–ª—è—é—â–∏–µ—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏

–ú–µ—Ç–æ–¥—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è ‚Äî —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤ `C#` –æ–±—ä—è–≤–ª—è—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è —Ç–∏–ø–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –Ω–µ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ. –¢.–µ. –æ–±—ä—è–≤–ª—è—Ç—å
–º–µ—Ç–æ–¥—ã –¥–ª—è –∫–∞–∫–∏—Ö-—Ç–æ –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤.

<div id="syntax"></div>
-----------------

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

#### –ü—Ä–∏–º–µ—Ä

```cs
using System;
using System.Collections.Generic;
using System.Text;

namespace Sample11.ConsoleApp.ExtensionMethods
{
    static class Extensions
    {
        public static bool IsBetween(this int a, int lower, int upper)
        {
            return lower <= a && a <= upper;
        }
    }
}
```

–í –ø—Ä–∏–º–µ—Ä–µ –º—ã –≤–∏–¥–∏–º –º–µ—Ç–æ–¥ `IsBetween`, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä—è–≤–ª–µ–Ω, –∫–∞–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–º –∫–ª–∞—Å—Å–µ. –í –ø–µ—Ä–≤–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–µ –º–µ—Ç–æ–¥–∞
–ø–µ—Ä–µ–¥ —Ç–∏–ø–æ–º –¥–∞–Ω–Ω—ã—Ö —É–∫–∞–∑–∞–Ω–æ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `this`. –≠—Ç–æ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –∫–∞–∫ —Ä–∞–∑ –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ, —á—Ç–æ –¥–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥
—è–≤–ª—è–µ—Ç—Å—è –º–µ—Ç–æ–¥–æ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è —Ç–∏–ø–∞ `int`. –í –ø—Ä–∏–º–µ—Ä–µ –º–µ—Ç–æ–¥ `IsBetween` –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ `a` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤
–¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç `lower` –¥–æ `upper` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ.

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ —Ç–µ–ø–µ—Ä—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –æ—Ç –∏–º–µ–Ω–∏ —Ç–∏–ø–∞ `int`, —á—Ç–æ –≤–∏–¥–Ω–æ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ:

```cs
using System;
using System.Collections.Generic;
using System.Text;

namespace Sample11.ConsoleApp.ExtensionMethods
{
    class ExtensionMethodsSamples : SamplesBase
    {
        protected override void RunSamples()
        {
            int i = 7;
            bool b = i.IsBetween(3, 10);

            Console.WriteLine(b);

            bool b1 = Extensions.IsBetween(i, 2, 19);
        }
    }
}
```

–£ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `i` –≤—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ `IsBetween` –∏ –ø–µ—Ä–µ–¥–∞—ë–º –Ω–∞ –≤—Ö–æ–¥ 2 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞, 1-–π –ø–∞—Ä–∞–º–µ—Ç—Ä ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–æ–π `i`. –î–≤–∞
–ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ ‚Äî —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ `lower` –∏ `upper`. 1-–π –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ, –æ–Ω —è–≤–ª—è–µ—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º
—Ç–∏–ø–∞. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫, –∫–∞–∫ –±—É–¥—Ç–æ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –æ–±—ä—è–≤–ª–µ–Ω –≤ —Ç–∏–ø–µ `int`.

–ú–µ—Ç–æ–¥—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è ‚Äî —ç—Ç–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Ç–∏–ø `int` –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ –Ω–∏–∫–∞–∫ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, —Ç–∏–ø—ã –≤ C# –Ω–µ
—è–≤–ª—è—é—Ç—Å—è —Ä–∞—Å—à–∏—Ä—è–µ–º—ã–º–∏. –ù–∏—á–µ–≥–æ —Ç–∞–∫–æ–≥–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤ —è–∑—ã–∫–µ –Ω–µ—Ç. –≠—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä –∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ
–∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —ç—Ç–æ –±—É–¥–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–æ –∫ —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: \
`bool b1 = Extensions.IsBetween(i, 2, 19);`

–¢.–µ. –ø–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —ç—Ç–æ –±—É–¥–µ—Ç –æ–±—ã—á–Ω—ã–π –≤—ã–∑–æ–≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–µ—Ç–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç—Ä–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞. –ù–∏—á–µ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ,
–Ω–æ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –º—ã –æ—â—É—â–∞–µ–º —ç—Ç–æ —Ç–∞–∫, –∫–∞–∫ –±—É–¥—Ç–æ —É —Ç–∏–ø–∞ `int` –ø–æ—è–≤–∏–ª—Å—è —Ç–∞–∫–æ–π –º–µ—Ç–æ–¥.

#### –ß—Ç–æ –µ—â—ë –Ω—É–∂–Ω–æ –∏–º–µ—Ç—å –≤ –≤–∏–¥—É?

- –ù—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è extension-–º–µ—Ç–æ–¥–∞ ‚Äî –º–µ—Ç–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º.
- –ö–ª–∞—Å—Å –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω –æ–±—ä—è–≤–ª–µ–Ω ‚Äî —Ç–æ–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º.
- 1-–π –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ –º–µ—Ç–æ–¥–µ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `this` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞.
- –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –º–µ—Ç–æ–¥ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ –±—ã–ª –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã –±—ã–ª–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
  –∏–º—ë–Ω –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–±—ä—è–≤–ª–µ–Ω —Ç–∏–ø, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–±—ä—è–≤–ª–µ–Ω —ç—Ç–æ—Ç –º–µ—Ç–æ–¥.

–ü–æ—Å–ª–µ–¥–Ω–∏–π –º–æ–º–µ–Ω—Ç —Å–∞–º—ã–π –Ω–µ—É–¥–æ–±–Ω—ã–π, –Ω–æ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏—è—Ö —Å—Ä–µ–¥ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—è–≤–∏–ª–∏—Å—å –ø–æ–¥—Å–∫–∞–∑–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
—Å —ç—Ç–∏–º, —Ä–∞–Ω—å—à–µ –±—ã–ª–æ —Ö—É–∂–µ =)

–û–±—ã—á–Ω–æ –º–µ—Ç–æ–¥—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –æ–±—ä—è–≤–ª—è—é—Ç –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –∏–º—ë–Ω, –∫–æ—Ç–æ—Ä–æ–µ —à–∏—Ä–æ–∫–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º. –ö –ø—Ä–∏–º–µ—Ä—É, –µ—Å–ª–∏ –µ—Å—Ç—å –∫–∞–∫–æ–π-—Ç–æ –∫—Ä—É–ø–Ω—ã–π
–ø—Ä–æ–µ–∫—Ç, –≤ –Ω—ë–º `Solution`, –º–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–æ–≤, –≤–æ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º—ë–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä–∏–º–µ—Ä
–∫–∞–∫ `–∏–º—è_–∫–æ–º–ø–∞–Ω–∏–∏.–∏–º—è_—Å–æ–ª—é—à–µ–Ω–∞.–∏–º—è_–ø—Ä–æ–µ–∫—Ç–∞.–∫–∞–∫–∞—è_—Ç–æ_—Å—Ç—Ä—É–∫—Ç—É—Ä–∞_–ø–∞–ø–æ–∫_–≤–Ω—É—Ç—Ä–∏_–ø—Ä–æ–µ–∫—Ç–∞`. –û–±—ã—á–Ω–æ —Ç–∞–∫ –¥–µ–ª–∞—é—Ç, –∏ —Ç–æ–≥–¥–∞ —É –Ω–∞—Å –≤
—Å–æ–ª—é—à–µ–Ω–µ –º–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–æ–≤, –Ω–æ —É –Ω–∏—Ö –Ω–∞—á–∞–ª–æ –≤—Å–µ—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ –∏–º—ë–Ω –≤–µ–∑–¥–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ. –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ–µ–∫—Ç `core` –≥–¥–µ –±—É–¥–µ—Ç
—á—Ç–æ-—Ç–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ –≤–µ–∑–¥–µ –∏ –≤ –±–∞–∑–æ–≤–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –∏–º—ë–Ω, –≥–¥–µ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ `–∏–º—è_–∫–æ–º–ø–∞–Ω–∏–∏` –∏ `–∏–º—è_—Å–æ–ª—é—à–µ–Ω–∞` –∏–ª–∏ –¥–∞–∂–µ
–ø—Ä–æ—Å—Ç–æ `–∏–º—è_–∫–æ–º–ø–∞–Ω–∏–∏` –æ–±—ä—è–≤–ª—è—Ç—å —Å–≤–æ–∏ –º–µ—Ç–æ–¥—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è. –ò —Ç–æ–≥–¥–∞ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —Ç–∞–∫–æ–π —Å–±–æ—Ä–∫–∏ –∫–æ –≤—Å–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–∞–º
–≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ –¥–∞–∂–µ –Ω–µ –ø—Ä–∏–¥—ë—Ç—Å—è –Ω–∏–∫–∞–∫–∏–µ —é–∑–∏–Ω–≥–∏ –ø–∏—Å–∞—Ç—å, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—Å–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å –∏–º–µ–Ω–∏ –∫–æ–º–ø–∞–Ω–∏–∏ –∏
–ø–æ—ç—Ç–æ–º—É –≤–µ–∑–¥–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –±–µ–∑ –≤—Å—è–∫–∏—Ö —é–∑–∏–Ω–≥–æ–≤. –ù–æ —ç—Ç–æ —Ö–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∫–æ–≥–¥–∞ –µ—Å—Ç—å –æ–¥–∏–Ω `Solution` –∏–ª–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–∞–Ω–∏–∏
–¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å —Å–æ –≤—Å–µ–º–∏ –∏–º–µ–Ω–æ–≤–∞—Ç—å –≤—Å—ë –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ. –ù–æ –µ—Å–ª–∏ –¥–µ–ª–∞–µ–º –ø—É–±–ª–∏—á–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É, —Ç–æ —Ç–∞–º –Ω—É–∂–Ω–æ 10 —Ä–∞–∑ –ø–æ–¥—É–º–∞—Ç—å
–∫–∞–∫–æ–µ –¥–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º—ë–Ω –¥–ª—è –º–µ—Ç–æ–¥–æ–≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø–æ—Ç–æ–º—É —á—Ç–æ –µ—Å—Ç—å —Ä–∏—Å–∫ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º —Å –¥—Ä—É–≥–∏–º–∏
–±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏. –ü—Ä–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ ‚Äî –Ω–∞–º–∏ –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞.

<div id="linq"></div>
-----------------

### LINQ

#### LINQ - Language-Integrated Query

–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —è–∑—ã–∫ –∑–∞–ø—Ä–æ—Å–æ–≤. –û–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –º–æ—â–Ω—ã—Ö –≤–µ—â–µ–π –≤ `.NET`.
`LINQ` —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏, —Ç–æ—á–Ω–µ–µ –¥–∞–∂–µ –Ω–µ —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏, –∞ —Å
–ø–µ—Ä–µ—á–∏—Å–ª–∏–º—ã–º, —Å `IEnumerable`.
`LINQ` —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ ‚Äî –Ω–∞–±–æ—Ä extension-–º–µ—Ç–æ–¥–æ–≤ –¥–ª—è `IEnumerable`.

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è `LINQ`, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º—ë–Ω `System.Linq`

–ù—É –∏ –¥–∞–ª–µ–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –∏–∑ `LINQ`, –Ω–∞–ø—Ä–∏–º–µ—Ä –º–µ—Ç–æ–¥ `Count`, –∫–æ—Ç–æ—Ä—ã–π —Å—á–∏—Ç–∞–µ—Ç –∫–æ–ª-–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
–≤ `IEnumerable`. –ü–æ—á–µ–º—É —Ç–∞–∫–æ–π –º–µ—Ç–æ–¥ –ø–æ—è–≤–∏–ª—Å—è? –ü–æ—Ç–æ–º—É —á—Ç–æ –≤ `IEnumerable` –Ω–µ—Ç —Å–ø–æ—Å–æ–±–∞ —É–∑–Ω–∞—Ç—å –∫–æ–ª-–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –¥–æ —Ç–µ—Ö –ø–æ—Ä
–ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –ø–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–æ—Å—Ç–æ –Ω–µ –±—É–¥–µ—Ç –ø–æ—Å—á–∏—Ç–∞–Ω–æ –∫–æ–ª-–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –ø–µ—Ä–µ–±–æ—Ä–µ. –ü–æ—Ç–æ–º—É —á—Ç–æ
–≤ `IEnumerable` –≤—Å—ë —á—Ç–æ –µ—Å—Ç—å ‚Äî —ç—Ç–æ –ø–æ–ª—É—á–µ–Ω–∏–µ `IEnumerator` –º–µ—Ç–æ–¥–æ–º `GetEnumerator`. –í `IEnumerator` –≤—Å—ë —á—Ç–æ –µ—Å—Ç—å ‚Äî
—ç—Ç–æ `Current`, `MoveNext` –∏ `Reset`.

```cs
int count1 = numbers.Count();
```

–ú–µ—Ç–æ–¥ `Count` –∏–∑ `Linq` ‚Äî —ç—Ç–æ extension-–º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è generic-–º–µ—Ç–æ–¥–æ–º:

```cs
public static int Count<TSource>(this IEnumerable<TSource> source);
```

–ú–µ—Ç–æ–¥ `Count` –∏–∑ `Linq` ‚Äî —ç—Ç–æ —à–∞–±–ª–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è `IEnumerable`
–ë–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, —Ç–æ—á–Ω–µ–µ —É –Ω–µ–≥–æ –æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä —Å –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º `this`, –∞ –∑–Ω–∞—á–∏—Ç —ç—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –º—ã –Ω–µ –ø–µ—Ä–µ–¥–∞—ë–º, –Ω–æ –Ω–∞ —ç—Ç–æ–º
–ø–∞—Ä–∞–º–µ—Ç—Ä–µ –º—ã –±—É–¥–µ–º –≤—ã–∑—ã–≤–∞—Ç—å —ç—Ç–æ—Ç extension-–º–µ—Ç–æ–¥. –í –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ –≤–∏–¥–Ω–æ –∫–∞–∫ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏.

–ï—Å—Ç—å –¥—Ä—É–≥–æ–π –º–µ—Ç–æ–¥ `Count`, –∫–æ—Ç–æ—Ä—ã–π —Å—á–∏—Ç–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–∏–µ –∫–∞–∫–æ–º—É-–ª–∏–±–æ —É—Å–ª–æ–≤–∏—é.

```cs
int count2 = numbers.Count(i => i < 7);
```

–ú–µ—Ç–æ–¥ `ElementAt` ‚Äî —ç—Ç–æ –ø–æ–ª—É—á–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–æ –∏–Ω–¥–µ–∫—Å—É. –ú–µ—Ç–æ–¥ `ElementAtOrDefault` ‚Äî —ç—Ç–æ –ø–æ–ª—É—á–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–æ –∏–Ω–¥–µ–∫—Å—É
–∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª —É–º–æ–ª—á–∞–Ω–∏—è. –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è `int` ‚Äî —ç—Ç–æ `0`. –î–ª—è –∫–ª–∞—Å—Å–æ–≤ ‚Äî `null`.

```cs
int el1 = numbers.ElementAt(5);
int el2 = numbers.ElementAtOrDefault(5);
```

–ú–µ—Ç–æ–¥ `First` –æ—Ç–¥–∞—ë—Ç –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–∑ `IEnumerable`. –ï—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–µ—Ç –ø–æ–ª—É—á–∏–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ. –ú–µ—Ç–æ–¥ `FirstOrDefault`
–æ—Ç–¥–∞—ë—Ç –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ `IEnumerable`. –¢–∞–∫–∂–µ –µ—Å—Ç—å –º–µ—Ç–æ–¥ `First`, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–¥–∞—ë—Ç —ç–ª–µ–º–µ–Ω—Ç –ø–æ
—É—Å–ª–æ–≤–∏—é. –¢.–µ. –ø–æ–ª—É—á–∏–º –Ω–µ –ø—Ä–æ—Å—Ç–æ 1-–π —ç–ª–µ–º–µ–Ω—Ç, –∞ –ø–µ—Ä–≤—ã–π –∏–∑ —Ç–µ—Ö, –∫–æ—Ç–æ—Ä—ã–π —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—é. –£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—ë–º —Å–∞–º–∏. –ò
–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ, `FirstOrDefault` –ø–æ —É—Å–ª–æ–≤–∏—é.

```cs
int first1 = numbers.First();               //  exception –µ—Å–ª–∏ –ø—É—Å—Ç–æ
int first2 = numbers.FirstOrDefault();
int first3 = numbers.First(i => i > 3);
int first4 = numbers.FirstOrDefault(i => i > 3);
```

–í—Å—ë —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ –¥–µ–ª–∞–µ–º —Å –ø–µ—Ä–≤—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º –º–æ–∂–Ω–æ –ø—Ä–æ–¥–µ–ª–∞—Ç—å –∏ —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ `Last`

```cs
int last1 = numbers.Last();                 //  exception –µ—Å–ª–∏ –ø—É—Å—Ç–æ
int last2 = numbers.LastOrDefault();
int last3 = numbers.Last(i => i > 3);
int last4 = numbers.LastOrDefault(i => i > 3);
```

–ú–µ—Ç–æ–¥ `Single`, —ç—Ç–æ –∫–∞–∫ `First`, –Ω–æ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π, —á—Ç–æ —Ç–∞–º –±–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç. –¢.–µ. —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
—ç–ª–µ–º–µ–Ω—Ç–∞ `IEnumerable`. –ï—Å–ª–∏ –æ–∫–∞–∂–µ—Ç—Å—è –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞, —Ç–æ –ø–æ–ª—É—á–∏–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ. –ú–µ—Ç–æ–¥ `SingleOrDefault` –≤–µ—Ä–Ω—ë—Ç
–∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç –≤ `IEnumerable`. –í–µ—Ä–Ω—ë—Ç –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ `IEnumerable` –ø—É—Å—Ç–æ–π –∏–ª–∏ –∏–º–µ–µ—Ç
–æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ.

```cs
int single1 = numbers.Single();             //  exception –µ—Å–ª–∏ –ø—É—Å—Ç–æ –∏–ª–∏ –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ
int single2 = numbers.SingleOrDefault();    //  exception –µ—Å–ª–∏ –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ
int single3 = numbers.Single(i => i > 3);
int single4 = numbers.SingleOrDefault(i => i > 3);

var random = new Random();
int single5 = numbers.First(i => i > random.Next(1, 6));
```

–ú–µ—Ç–æ–¥ `Max` ‚Äî –ø–æ–∏—Å–∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ä–µ–¥–∏ `IEnumerable` —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ú–µ—Ç–æ–¥ `Min` - –ø–æ–∏—Å–∫ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
—Å—Ä–µ–¥–∏ `IEnumerable` —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ú–µ—Ç–æ–¥ `Sum` - —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ `IEnumerable` —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

–ú–µ—Ç–æ–¥ `Max` –∏–º–µ–µ—Ç –∫—É—á—É –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫, –¥–ª—è `int`, `double`, `decimal`, `float` –∏ —Ç.–¥.

```cs
int max1 = numbers.Max();
int max2 = movies.Max(movie => movie.ReleaseDate.Year);
int min1 = numbers.Min();
int min2 = movies.Min(movie => movie.ReleaseDate.Year);
int sum1 = numbers.Sum();
```

–ê –µ—â—ë –≤ –º–µ—Ç–æ–¥–µ `Max` –µ—Å—Ç—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø—Ä–∏–Ω–∏–º–∞—é—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä:

```cs
public static decimal Max<TSource>(this IEnumerable<TSource> source, Func<TSource, decimal> selector);
```

–ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ? –≠—Ç–æ —à–∞–±–ª–æ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è `IEnumerable<TSource>` –∏ —Å–µ–ª–µ–∫—Ç–æ—Ä ‚Äî —ç—Ç–æ –¥–µ–ª–µ–≥–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π `Func`, —Ç.–µ. —ç—Ç–æ –º–µ—Ç–æ–¥,
–∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ —ç–ª–µ–º–µ–Ω—Ç —Ç–∏–ø–∞ `TSource`, —Ç.–µ. —ç–ª–µ–º–µ–Ω—Ç —ç—Ç–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏(—ç—Ç–æ–≥–æ `IEnumerable`) –∏
–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `decimal`. –¢–∞–∫–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –º–æ–∂–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ `decimal`, –Ω–æ –∏ `int`, `double` –∏ –¥—Ä—É–≥–∏–µ. –ù–æ –≥–ª–∞–≤–Ω–æ–µ, —á—Ç–æ –Ω–∞ –≤—Ö–æ–¥
–æ–Ω –ø–æ–ª—É—á–∞–µ—Ç –∫–∞–∫–æ–π-—Ç–æ —ç–ª–µ–º–µ–Ω—Ç. –ó–∞—á–µ–º —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è? –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–∞–∂–µ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏
–≤ –Ω–∞—à–µ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–µ —á–∏—Å–ª–∞, –∞ –∫–∞–∫–∏–µ-—Ç–æ —Å–æ—Å—Ç–∞–≤–Ω—ã–µ —Ç–∏–ø—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä
–≥–æ–¥–∞ (`ReleaseDate.Year`) –≤ —Å–æ—Å—Ç–∞–≤–Ω–æ–º —Ç–∏–ø–µ –¥–∞–Ω–Ω—ã—Ö `movie`, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ.

–ú–µ—Ç–æ–¥ `Sum` ‚Äî –ø–æ–¥—Å—á—ë—Ç —Å—É–º–º—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ç–∏–ø–æ–≤. –ú–µ—Ç–æ–¥ `Average` ‚Äî –ø–æ–¥—Å—á—ë—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ç–∏–ø–æ–≤.

```cs
int avgMovieLength1 = movies.Sum(m => m.Title.Length) / movies.Count();
int avgMovieLength2 = (int)movies.Average(m => m.Title.Length);
```

–ú–µ—Ç–æ–¥—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:

* `OrderBy(i => i)` ‚Äî –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
* `OrderBy(m => m.Title)`
* `OrderByDescending(m => m.ReleaseDate)` ‚Äî –ø–æ —É–±—ã–≤–∞–Ω–∏—é.
* `OrderByDescending(m => m.ReleaseDate.Year).ThenBy(m => m.Title)` ‚Äî –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —É—Å–ª–æ–≤–∏—è–º.

```cs
var orderedNumbers = numbers.OrderBy(i => i);
var orderedMovies1 = movies.OrderBy(m => m.Title);
var orderedMovies2 = movies.OrderByDescending(m => m.ReleaseDate);
var orderedMovies3 = movies
    .OrderByDescending(m => m.ReleaseDate.Year)
    .ThenBy(m => m.Title);
```

–ú–µ—Ç–æ–¥ `Select` ‚Äî –æ–¥–∏–Ω –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –º–µ—Ç–æ–¥–æ–≤. –ï—Å—Ç—å —Å—Ö–æ–¥—Å—Ç–≤–æ —Å `Select` –∏–∑ `SQL`. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ —Ç–æ–∂–µ —Å–∞–º–æ–µ,
—á—Ç–æ –∏ –º–µ—Ç–æ–¥ `map` –≤ –¥—Ä—É–≥–∏—Ö –Ø–ü. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥–∞ —Ç–∞–∫–∂–µ –∏–º–µ–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫—É, –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –º–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –µ—â—ë –∏ –ø–æ—Ä—è–¥–∫–æ–≤—ã–π
–Ω–æ–º–µ—Ä: \
`Select(m, i)` ‚Äî —Ç.–µ. —Å–∞–º —ç–ª–µ–º–µ–Ω—Ç `IEnumerable` –∏ –µ–≥–æ –∏–Ω–¥–µ–∫—Å.

```cs
IEnumerable<string> select1 = movies.Select(m => m.Title);
var select2 = string.Join("\n", movies.Select((m, i) => $"{i + 1}. {m.Title}"));
```

–ú–µ—Ç–æ–¥ `Where` ‚Äî –µ—â—ë –æ–¥–∏–Ω –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –º–µ—Ç–æ–¥–æ–≤. –ï—Å—Ç—å —Å—Ö–æ–¥—Å—Ç–≤–æ —Å `Where` –∏–∑ `SQL`. –ü–æ —Å—É—Ç–∏ —ç—Ç–æ —Ñ–∏–ª—å—Ç—Ä.
–ù–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∏–ª—å—Ç—Ä—É–µ–º —Ñ–∏–ª—å–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–¥—Å—Ç—Ä–æ–∫—É `fight`: \
`IEnumerable<Movie> filtered = movie.Where(m => m.Title.Contains("fight"));`

```cs
IEnumerable<Movie> filtered = movies.Where(m => m.Title.Contains("fight"));
```

–ú–æ–∂–Ω–æ —Å–æ–≤–º–µ—â–∞—Ç—å –ø–æ —Ü–µ–ø–æ—á–∫–µ, `—á–µ–π–Ω–∏—Ç—å`, –æ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ `chain`. –ù–∞–ø—Ä–∏–º–µ—Ä: `Select.Where.Where.Where.OrderBy`

–ú–µ—Ç–æ–¥ `Skip().Take()` ‚Äî —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–π –≤—ã–¥–∞—á–∏.

```cs
 var secondPage = movies.Skip(10).Take(10);
```

–ú–µ—Ç–æ–¥ `SelectMany` ‚Äî –∫–∞–∫ `Select`, —Ç–æ–ª—å–∫–æ –≤—ã—Å—à–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –µ—Å–ª–∏ —É –≤–∞—Å –Ω–∞ –≤—Ö–æ–¥–µ –µ—Å—Ç—å `IEnumerable`
–∫–∞–∫–∏—Ö-—Ç–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –≤—Ö–æ–¥–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –≤—ã –≤ `SelectMany` –ø–µ—Ä–µ–¥–∞—ë—Ç–µ, —Å–æ–∑–¥–∞—ë—Ç —Ü–µ–ª—É—é
–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –¢.–µ. –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç –ø–æ—Ä–æ–∂–¥–∞–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –¢.–µ. –ø–æ–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ —É –≤–∞—Å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ
–ø–æ—Ä–æ–∂–¥–∞–µ—Ç—Å—è —Å—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π, —Å–∫–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∏—Å—Ö–æ–¥–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –¢.–µ. –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö –ø–æ—Ä–æ–¥–∏–ª
—Å–≤–æ—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –ò –ø–æ—Ç–æ–º –≤—Å–µ –≤–æ—Ç —ç—Ç–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∫–ª–µ–∏–≤–∞—é—Ç—Å—è –≤ –æ–¥–Ω—É, –ø–ª–æ—Å–∫—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –¢.–µ. –Ω–∞
–≤—ã—Ö–æ–¥–µ –ø–æ–ª—É—á–∞–µ–º –æ–¥–∏–Ω –±–æ–ª—å—à–æ–π –º–∞—Å—Å–∏–≤, —Ç–æ–ª—å–∫–æ –Ω–µ –º–∞—Å—Å–∏–≤, –∞ `IEnumerable`.

```cs
/**
 * numbers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
 * manyNumbers: [100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 200, 201, 202, ...]
 */
var manyNumbers = numbers.SelectMany(i => Enumerable.Range(i * 100, 10));
```

–í `–°#` –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å **—ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö —Ç–∏–ø–æ–≤**. –ó–∞—á–µ–º? –û–¥–∏–Ω –∏–∑ –º–µ—Ç–æ–¥–æ–≤ `LINQ` ‚Äî `Aggregate`, –æ–Ω
–≤—ã–ø–æ–ª–Ω—è–µ—Ç –∞–≥—Ä–µ–≥–∞—Ü–∏—é –∑–Ω–∞—á–µ–Ω–∏—è. –ê–≥—Ä–µ–≥–∞—Ü–∏—è ‚Äî —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –≤—ã –∫–∞–∫–∏–º-—Ç–æ –æ–±—Ä–∞–∑–æ–º –ø—Ä–æ–±–µ–≥–∞–µ—Ç–µ –ø–æ –≤–∞—à–µ–º—É `IEnumerable` –∏ –≤
—Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∞–∫–∫—É–º—É–ª–∏—Ä—É–µ—Ç–µ –∫–∞–∫–æ–π-—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ –≤—Å—ë —á—Ç–æ —É–≥–æ–¥–Ω–æ, –º–æ–∂–µ—Ç –±—ã—Ç—å —á–∏—Å–ª–æ, –º–æ–∂–µ—Ç
–±—ã—Ç—å –Ω–æ–≤–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è, –≤—Å—ë —á—Ç–æ —É–≥–æ–¥–Ω–æ, –≤—Å—ë —á—Ç–æ –∑–∞—Ö–æ—Ç–∏—Ç–µ, –≥–ª–∞–≤–Ω–æ–µ, —á—Ç–æ –≤—ã —Å–∞–º–∏ –∑–∞–¥–∞—ë—Ç–µ –º–µ—Ç–æ–¥ –∞–∫–∫—É–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è, –∞–≥—Ä–µ–≥–∞—Ü–∏–∏,
—ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –∏ –Ω–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏, –≤–∞—à –¥–µ–ª–µ–≥–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –¥–∞—ë—Ç–µ, –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –∏ –≤—ã –±—É–¥–µ—Ç–µ –≥–æ–≤–æ—Ä–∏—Ç—å, –≤–∞–º –Ω–∞ –≤—Ö–æ–¥
–¥–∞—ë—Ç—Å—è —á—Ç–æ –±—ã–ª–æ —Ä–∞–Ω—å—à–µ —Å –≤–æ—Ç —ç—Ç–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –∏ —ç–ª–µ–º–µ–Ω—Ç —Ç–µ–∫—É—â–∏–π –∏ –≤—ã –≥–æ–≤–æ—Ä–∏—Ç–µ, —á—Ç–æ —Å–¥–µ–ª–∞—Ç—å —Å —ç—Ç–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º, –∫–∞–∫–æ–π
–Ω–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ —Ç–µ–∫—É—â–µ–≥–æ —à–∞–≥–∞. –¢.–µ. —É –≤–∞—Å –ø–æ–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç–µ –∫–∞–∫–∏–µ-—Ç–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è.
–ü–æ–¥—Ä–æ–±–Ω—ã–π –ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ. –í –Ω—ë–º –≤–∏–¥–Ω–æ, —á—Ç–æ –≤ –º–µ—Ç–æ–¥ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è 2 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –Ω–∞ –≤—Ö–æ–¥. 1-–π ‚Äî —ç—Ç–æ –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –æ–Ω–æ –±—É–¥–µ—Ç
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞ 1-–π –∏—Ç–µ—Ä–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —ç—Ç–æ–≥–æ `IEnumerable` –¥–∞–¥—É—Ç —è —Å–∫–∞–∂—É –∫–∞–∫ –µ–≥–æ –Ω—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫ —ç—Ç–æ–º—É
–Ω–∞—á–∞–ª—å–Ω–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é —ç—Ç–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.

```cs
//  –≠–∫–∑–µ–º–ø–ª—è—Ä –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ —Ç–∏–ø–∞
var obj = new { Foo = "bar" };
SumWithWindow(numbers, 3);

/// <summary>
/// –°—É–º–º–∞ —Å–æ —Å–∫–æ–ª—å–∑—è—â–∏–º –æ–∫–Ω–æ–º
/// </summary>
/// <param name="numbers"></param>
private static void SumWithWindow(IEnumerable<int> numbers, int windowLength)
{
    var result = numbers.Aggregate(
        new
        {
            Current = new List<int>(),
            Result = new List<int>()
        },
        (result, next) =>
        {
            result.Current.Add(next);

            if (result.Current.Count == windowLength)
            {
                int currentSum = result.Current.Sum();

                result.Result.Add(currentSum);
                result.Current.Clear();
            }

            return result;
        });
}
```

–ï—â—ë –≤ `LINQ` –µ—Å—Ç—å —Ç–∞–∫–∏–µ –º–µ—Ç–æ–¥—ã, –∫–∞–∫ `Any` –∏ `All`. –ù–∞ –≤—ã—Ö–æ–¥–µ –±—É–ª–µ–≤–æ –∑–Ω–∞—á–µ–Ω–∏–µ. –ú–µ—Ç–æ–¥ `Any` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω
—ç–ª–µ–º–µ–Ω—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—é.  
–ú–µ—Ç–æ–¥ `All` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç `IEnumerable` —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤–∞–º–∏ —É—Å–ª–æ–≤–∏—é.

```cs
bool has2007 = movies.Any(m => m.ReleaseDate.Year == 2007);
bool allPositive = numbers.All(i => i > 0);
```

–°–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä ‚Äî —ç—Ç–æ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞. –ú–µ—Ç–æ–¥ `GroupBy`, –¥–ª—è –Ω–µ–≥–æ –≤—ã –∑–∞–¥–∞—ë—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –Ω—É–∂–Ω–æ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–∏
—ç–ª–µ–º–µ–Ω—Ç—ã. –ó–Ω–∞—á–µ–Ω–∏–µ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—Å—ë —á—Ç–æ —É–≥–æ–¥–Ω–æ. –ß–∞—â–µ –≤—Å–µ–≥–æ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∫–æ–≥–æ-—Ç–æ —Å–≤–æ–π—Å—Ç–≤–∞. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ
–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å `IGouping`, —ç—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –ø–æ —Å—É—Ç–∏ –æ–Ω
—è–≤–ª—è–µ—Ç—Å—è `IEnumerable`, —Ç.–µ. –Ω–∞—Å–ª–µ–¥—É–µ—Ç –æ—Ç `IEnumerable`, –Ω–æ –æ–Ω –µ—â—ë –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–≤–æ–π—Å—Ç–≤–æ `Key`, –∫–ª—é—á, —Ç.–µ. —Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ
–∫–æ—Ç–æ—Ä–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—ã –±—ã–ª–∏ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω—ã. –û–Ω–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –∫–∞–∫ —Å–≤–æ–π—Å—Ç–≤–æ, –µ–≥–æ –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, —ç—Ç–æ —É–¥–æ–±–Ω–æ.

```cs
ShowGroupBy(movies);

private static void ShowGroupBy(IEnumerable<Movie> movies)
{
    IEnumerable<IGrouping<int, Movie>> groupped = movies.GroupBy(m => m.ReleaseDate.Year);

    foreach (var group in groupped)
    {
        Console.WriteLine("Movies released in {0}: ", group.Key);

        foreach (var movie in group)
        {
            Console.WriteLine("  - {0}", movie.Title);
        }
    }
}
```

–ú–µ—Ç–æ–¥ `Union` - –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–≤–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ
–º–Ω–æ–∂–µ—Å—Ç–≤.

```cs
var union = numbers.Union(movies.Select(m => m.ReleaseDate.Year));
```

–ü—Ä–∏–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–¥—É–º–∞—Ç—å—Å—è –∏ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–æ–≥–æ –∫–∞–∫ –≤—Å—ë —ç—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º. –î–æ–ø—É—Å—Ç–∏–º –µ—Å—Ç—å
—Å–ø–∏—Å–æ–∫ `numbers`, —ç—Ç–æ `List` `int`-–æ–≤ –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –æ—Ç `0` –¥–æ `4`. –î–∞–ª–µ–µ –∏–¥—ë—Ç —Ü–µ–ø–æ—á–∫–∞
–º–µ—Ç–æ–¥–æ–≤ `LINQ`. –ë–µ—Ä—ë–º `numbers` –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ –¥–≤—É—Ö, —É–º–Ω–æ–∂–∞–µ–º –Ω–∞ `3` –∏ —Å–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é. –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤
–∫–æ–Ω—Å–æ–ª—å —Å–æ–µ–¥–∏–Ω—è—è –∑–∞–ø—è—Ç—ã–º–∏. –î–∞–ª—å—à–µ —Å—á–∏—Ç–∞–µ–º –∫–æ–ª-–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –ø—Ä–∏ —ç—Ç–æ–º —Ü–µ–ø–æ—á–∫–∞ –ø—Ä–æ–π–¥—ë—Ç –µ—â—ë —Ä–∞–∑ —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞. –î–∞–ª–µ–µ
–¥–æ–±–∞–≤–ª—è–µ–º –≤ `numbers` –µ—â—ë –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç, —á–∏—Å–ª–æ `5`. –ï—â—ë —Ä–∞–∑ –≤—ã–≤–æ–¥–∏–º –≤ –∫–æ–Ω—Å–æ–ª—å. –ò –≤–∏–¥–∏–º, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—É—á–∏–ª—Å—è –¥—Ä—É–≥–æ–π,
—ç—Ç–æ –¥–∞—ë—Ç –Ω–∞–º –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ `query` - —ç—Ç–æ –Ω–µ –º–∞—Å—Å–∏–≤, —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –∏ —ç—Ç–æ—Ç –º–µ—Ö–∞–Ω–∏–∑–º —É—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç. –ú–æ–∂–Ω–æ
–º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–æ–≤ `.ToArray` –∏–ª–∏ `.ToList`.

```cs
ShowMaterialize();

private void ShowMaterialize()
{
    var numbers = new List<int>(Enumerable.Range(0, 5));

    var query = numbers                 //  0 1 2 3 4
        .Where(i => i > 2)              //  3 4
        .Select(i => i * 3)             //  9 12
        .OrderByDescending(i => i);     //  12 9

    Console.WriteLine(string.Join(", ", query));    //  12, 9

    int count = query.Count();  //  –∑–∞–Ω–æ–≤–æ –≤—ã—á–∏—Å–ª—è–µ—Ç –≤—Å—ë

    numbers.Add(5);

    Console.WriteLine(string.Join(", ", query));    //  15, 12, 9

    int[] array = query.ToArray();
    List<int> list = query.ToList();
}
```

–í `LINQ` –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –∑–∞–∫–ª–∞–¥—ã–≤–∞–ª–∞—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –æ–ø–∏—Å–∞–Ω–Ω–∞—è –≤ –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ, –Ω–æ –µ—ë —Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç. –≠—Ç–æ —Ü–µ–ª—ã–π —è–∑—ã–∫
–∑–∞–ø—Ä–æ—Å–æ–≤, –æ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ—Ö–æ–∂ –Ω–∞ —è–∑—ã–∫. –û—Ç–¥–∞–ª—ë–Ω–Ω–æ –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç `SQL`, –ø–æ—Ä—è–¥–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π –∏–Ω–æ–π, –Ω–æ –ø–æ—Ö–æ–∂–µ.
> –ü–æ—Å–ª–µ –ø–æ–ª–ª–∏—Ç—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å üòÄ

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —ç—Ç–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π —Å–∞—Ö–∞—Ä, —ç—Ç–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ —Ü–µ–ø–æ—á–∫—É –≤—ã–∑–æ–≤–æ–≤ `extension`-–º–µ—Ç–æ–¥–æ–≤, –æ—Å–Ω–æ–≤–Ω—ã–µ
–∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω—ã –≤—ã—à–µ. –≠—Ç–∏–º –º–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è, –Ω–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–µ, –≤ —Å–ª—É—á–∞–µ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, —Ü–µ–ø–æ—á–∫–∞ –≤—ã–∑–æ–≤–æ–≤
–≤—ã–≥–ª—è–¥–∏—Ç –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º–æ–π. 

#### –ü—Ä–∏–º–µ—Ä

```cs
using System;
using System.Collections.Generic;
using System.Text;
using System.Linq;

namespace Sample11.ConsoleApp.Linq
{
    class LinqSamples : SamplesBase
    {
        protected override void RunSamples()
        {
            /**
             * LINQ - Language Integrated Query
             */

            IEnumerable<int> numbers = Enumerable.Range(1, 10);
            IEnumerable<Movie> movies = GenerateTestMovies();

            ShowKeywords();

        }

        private void ShowKeywords()
        {
            var numbers = new List<int>(Enumerable.Range(0, 5));

            var query =
                from n in numbers
                where n > 3
                select n;

            var query2 =
                from n in numbers
                where n > 3
                orderby n descending
                select n;

            var query3 =
                from n in numbers
                where n > 3
                orderby n descending
                select $"The number is {n}";

            var sameAsQuery3 = numbers
                .Where(n => n > 3)
                .OrderByDescending(n => n)
                .Select(n => $"The number is {n}");

            var alsoSameAsQuery3 = Enumerable.Select(
                Enumerable.OrderByDescending(
                    Enumerable.Where(
                        numbers,
                        n => n > 3),
                    n => n),
                n => $"The number is {n}");

            var movies = GenerateTestMovies();

            var query4 =
                from movie in movies
                group movie by movie.ReleaseDate.Year into moviesByYear
                select new
                {
                    ReleaseYear = moviesByYear.Key,
                    Movies =
                        from m in moviesByYear
                        select m
                };

            var sameAsQuery4 = movies
                .GroupBy(movie => movie.ReleaseDate.Year)
                .Select(moviesByYear => new
                {
                    ReleaseYear = moviesByYear.Key,
                    Movies = moviesByYear.AsEnumerable()
                });
        }



        private IEnumerable<Movie> GenerateTestMovies()
        {
            return new[]
            {
                new Movie { Title = "Some title", ReleaseDate = new DateTime(1997, 4, 3) }
            };
        }
    }
}
```

```cs
Ôªøusing System;
using System.Collections.Generic;
using System.Text;

namespace Sample11.ConsoleApp.Linq
{
    class Movie
    {
        public string Title { get; set; }

        public DateTime ReleaseDate { get; set; }
    }
}
```

#### –ü—Ä–∏–º–µ—Ä —Ç–æ–≥–æ, –∫–∞–∫ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç –º–µ—Ç–æ–¥ Count –¥–ª—è IEnumerable (—ç—Ç–æ –Ω–µ –Ω–∞—Å—Ç–æ—è—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è):

–ü–µ—Ä–µ–±–æ—Ä –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –Ω–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `ICollection`, —Ç.–∫. –Ω–µ—Ç —Å–º—ã—Å–ª–∞ –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å, –≤–µ–¥—å
—É `ICollection` –µ—Å—Ç—å —Å–≤–æ–π –º–µ—Ç–æ–¥ `Count`, –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ —É—Å–ø–µ—à–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è.

```cs
using System;
using System.Collections.Generic;
using System.Text;

namespace Sample11.ConsoleApp.Linq
{
    static class Extensions
    {
        public static int MyCount<T>(this IEnumerable<T> enumerable)
        {
            int count = 0;

            if (enumerable is ICollection<T>)
            {
                count = (enumerable as ICollection<T>).Count;
            }
            else
            {
                foreach (var item in enumerable)
                {
                    count++;
                }
            }

            return count;
        }

        public static int MyCount<T>(this IEnumerable<T> enumerable, Func<T, bool> predicate)
        {
            int count = 0;

            foreach (var item in enumerable)
            {
                if (predicate(item))
                {
                    count++;
                }
            }

            return count;
        }

        public static IEnumerable<T> Skip<T>(this IEnumerable<T> items, int count)
        {
            foreach (var item in items)
            {
                if (count == 0)
                    yield return item;
                else
                    count--;
            }
        }

        public static IEnumerable<U> MySelect<T, U>(this IEnumerable<T> enumerable, Func<T, U> selector)
        {
            /*
            var enumerator = enumerable.GetEnumerator();

            while (enumerator.MoveNext())
            {
                yield return selector(enumerator.Current);
            }
            */

            foreach (var item in enumerable)
            {
                yield return selector(item);
            }
        }
    }
}

```

[–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –Ω–∞—á–∞–ª–æ](#begin)